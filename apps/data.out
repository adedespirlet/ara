cd kmeans && if [ -d script ]; then python3 script/gen_data.py  > data.S ; else touch data.S; fi
sed -i s/"li t0, MSTATUS_FS | MSTATUS_XS$"/"li t0, MSTATUS_FS | MSTATUS_XS | MSTATUS_VS"/ /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S
git update-index --assume-unchanged /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S
/scratch/sem23h22/ara/install/riscv-llvm/bin/clang -march=rv64gcv_zfh_zvfh0p1 -menable-experimental-extensions -mabi=lp64d -mno-relax -fuse-ld=lld -fno-vectorize -mllvm -scalable-vectorization=off -mllvm -riscv-v-vector-bits-min=0 -Xclang -target-feature -Xclang +no-optimized-zero-stride-load -mcmodel=medany -I/scratch/sem23h22/ara/apps/common -std=gnu99 -O3 -ffast-math -fno-common -fno-builtin-printf  -DNR_LANES=4 -DVLEN=4096 -Wunused-variable -Wall -Wextra -Wno-unused-command-line-argument  -DPREALLOCATE=1 -DSPIKE=1 -I/scratch/sem23h22/ara/apps/riscv-tests/env -I/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common -ffunction-sections -fdata-sections -c kmeans/data.S -o kmeans/data.S.o.spike
/scratch/sem23h22/ara/install/riscv-llvm/bin/clang -march=rv64gcv_zfh_zvfh0p1 -menable-experimental-extensions -mabi=lp64d -mno-relax -fuse-ld=lld -fno-vectorize -mllvm -scalable-vectorization=off -mllvm -riscv-v-vector-bits-min=0 -Xclang -target-feature -Xclang +no-optimized-zero-stride-load -mcmodel=medany -I/scratch/sem23h22/ara/apps/common -std=gnu99 -O3 -ffast-math -fno-common -fno-builtin-printf  -DNR_LANES=4 -DVLEN=4096 -Wunused-variable -Wall -Wextra -Wno-unused-command-line-argument  -DPREALLOCATE=1 -DSPIKE=1 -I/scratch/sem23h22/ara/apps/riscv-tests/env -I/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common -ffunction-sections -fdata-sections -c /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S -o /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S.o.spike
mkdir -p bin/
/scratch/sem23h22/ara/install/riscv-llvm/bin/clang -Iinclude -march=rv64gcv_zfh_zvfh0p1 -menable-experimental-extensions -mabi=lp64d -mno-relax -fuse-ld=lld -fno-vectorize -mllvm -scalable-vectorization=off -mllvm -riscv-v-vector-bits-min=0 -Xclang -target-feature -Xclang +no-optimized-zero-stride-load -mcmodel=medany -I/scratch/sem23h22/ara/apps/common -std=gnu99 -O3 -ffast-math -fno-common -fno-builtin-printf  -DNR_LANES=4 -DVLEN=4096 -Wunused-variable -Wall -Wextra -Wno-unused-command-line-argument  -DPREALLOCATE=1 -DSPIKE=1 -I/scratch/sem23h22/ara/apps/riscv-tests/env -I/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common -ffunction-sections -fdata-sections -o bin/kmeans.spike kmeans/data.S.o.spike kmeans/kernel/kmeans.c.o.spike kmeans/main.c.o.spike /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S.o.spike /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/syscalls.c.o.spike common/util.c.o.spike -static -nostartfiles -lm -Wl,--gc-sections -nostdlib -T/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/test.ld -Wl,--gc-sections -DSPIKE
/scratch/sem23h22/ara/install/riscv-llvm/bin/llvm-objdump --mattr=v -D bin/kmeans.spike > bin/kmeans.spike.dump
mkdir -p spike_runs

Simulating kmeans with SPIKE:

/scratch/sem23h22/ara/install/riscv-isa-sim/bin/spike --isa=rv64gcv_zfh --varch="vlen:4096,elen:64" bin/kmeans.spike | tee spike_runs/spike-run-kmeans

=============
=  KMEANS  =
=============


Matrix k:
35 37 6 
4 33 31 
36 31 18 
Matrix A:
38 28 14 42 7 20 38 18 22 10 10 23 35 39 23 2 21 1 23 43 29 37 1 20 32 11 21 43 24 48 26 41 27 15 14 46 43 2 36 6 20 8 38 17 3 24 13 49 8 25 1 19 27 46 6 43 7 46 34 13 16 35 49 39 3 1 5 41 3 28 17 25 43 33 9 35 13 30 47 14 7 13 22 39 20 15 44 17 46 23 25 24 44 40 28 14 44 0 24 6 
42 7 20 38 18 22 10 10 23 35 39 23 2 21 1 23 43 29 37 1 20 32 11 21 43 24 48 26 41 27 15 14 46 43 2 36 6 20 8 38 17 3 24 13 49 8 25 1 19 27 46 6 43 7 46 34 13 16 35 49 39 3 1 5 41 3 28 17 25 43 33 9 35 13 30 47 14 7 13 22 39 20 15 44 17 46 23 25 24 44 40 28 14 44 0 24 6 8 23 0 
38 18 22 10 10 23 35 39 23 2 21 1 23 43 29 37 1 20 32 11 21 43 24 48 26 41 27 15 14 46 43 2 36 6 20 8 38 17 3 24 13 49 8 25 1 19 27 46 6 43 7 46 34 13 16 35 49 39 3 1 5 41 3 28 17 25 43 33 9 35 13 30 47 14 7 13 22 39 20 15 44 17 46 23 25 24 44 40 28 14 44 0 24 6 8 23 0 43 7 23 
Matrix c:
0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	Calculating kmeans...
MAIN
iteration number: 0 
custom memcpy
Assign Points to Clusters
Matrix clusters:
0 	1 	0 	1 	2 	2 	0 	2 	0 	2 	2 	1 	0 	1 	1 	2 	2 	2 	0 	0 	0 	1 	2 	2 	1 	2 	2 	1 	1 	1 	1 	1 	1 	0 	2 	1 	1 	2 	0 	0 	0 	2 	0 	2 	2 	0 	2 	0 	2 	1 	2 	2 	1 	1 	2 	0 	2 	1 	1 	2 	2 	0 	1 	1 	2 	2 	2 	0 	2 	1 	0 	1 	1 	0 	2 	1 	2 	1 	1 	2 	2 	2 	2 	1 	2 	0 	1 	0 	1 	0 	1 	0 	0 	1 	0 	2 	1 	2 	1 	2 	
Matrix clusters copied version:
0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	0 	
Cluster Centers:
Cluster 0: (28, 6)
Cluster 1: (35, 34)
Cluster 2: (10, 27)
Cluster 0 Variance: 3739
Cluster 1 Variance: 4927
Cluster 2 Variance: 5992
Total Variation: 14658
iteration number: 1 
custom memcpy
Assign Points to Clusters
Matrix clusters:
0 	1 	0 	1 	2 	2 	0 	2 	0 	2 	2 	1 	0 	1 	1 	2 	2 	2 	0 	0 	0 	1 	2 	1 	1 	2 	1 	1 	1 	1 	0 	1 	1 	0 	2 	1 	1 	2 	0 	0 	0 	2 	0 	2 	2 	0 	2 	0 	2 	1 	2 	2 	1 	1 	2 	0 	2 	1 	1 	2 	2 	0 	1 	1 	2 	2 	2 	0 	2 	1 	0 	1 	1 	0 	2 	1 	2 	1 	1 	2 	2 	2 	2 	1 	2 	0 	1 	0 	1 	0 	1 	0 	0 	1 	0 	2 	1 	2 	1 	2 	
Matrix clusters copied version:
0 	1 	0 	1 	2 	2 	0 	2 	0 	2 	2 	1 	0 	1 	1 	2 	2 	2 	0 	0 	0 	1 	2 	2 	1 	2 	2 	1 	1 	1 	1 	1 	1 	0 	2 	1 	1 	2 	0 	0 	0 	2 	0 	2 	2 	0 	2 	0 	2 	1 	2 	2 	1 	1 	2 	0 	2 	1 	1 	2 	2 	0 	1 	1 	2 	2 	2 	0 	2 	1 	0 	1 	1 	0 	2 	1 	2 	1 	1 	2 	2 	2 	2 	1 	2 	0 	1 	0 	1 	0 	1 	0 	0 	1 	0 	2 	1 	2 	1 	2 	
Cluster Centers:
Cluster 0: (28, 6)
Cluster 1: (35, 35)
Cluster 2: (9, 26)
Cluster 0 Variance: 3968
Cluster 1 Variance: 5211
Cluster 2 Variance: 5328
Total Variation: 14507
iteration number: 2 
custom memcpy
Assign Points to Clusters
Matrix clusters:
0 	1 	0 	1 	2 	2 	0 	2 	0 	2 	2 	1 	0 	1 	1 	2 	2 	2 	0 	0 	0 	1 	2 	1 	1 	2 	1 	1 	1 	1 	0 	1 	1 	0 	2 	1 	1 	2 	0 	0 	0 	2 	0 	2 	2 	0 	2 	0 	2 	1 	2 	2 	1 	1 	2 	0 	2 	1 	1 	2 	2 	0 	1 	1 	2 	2 	2 	0 	2 	1 	0 	1 	1 	0 	2 	1 	2 	1 	1 	2 	2 	2 	2 	1 	2 	0 	1 	0 	1 	0 	1 	0 	0 	1 	0 	2 	1 	2 	1 	2 	
Matrix clusters copied version:
0 	1 	0 	1 	2 	2 	0 	2 	0 	2 	2 	1 	0 	1 	1 	2 	2 	2 	0 	0 	0 	1 	2 	1 	1 	2 	1 	1 	1 	1 	0 	1 	1 	0 	2 	1 	1 	2 	0 	0 	0 	2 	0 	2 	2 	0 	2 	0 	2 	1 	2 	2 	1 	1 	2 	0 	2 	1 	1 	2 	2 	0 	1 	1 	2 	2 	2 	0 	2 	1 	0 	1 	1 	0 	2 	1 	2 	1 	1 	2 	2 	2 	2 	1 	2 	0 	1 	0 	1 	0 	1 	0 	0 	1 	0 	2 	1 	2 	1 	2 	
Cluster Centers:
Cluster 0: (28, 6)
Cluster 1: (35, 35)
Cluster 2: (9, 26)
Cluster 0 Variance: 3968
Cluster 1 Variance: 5211
Cluster 2 Variance: 5328
Total Variation: 14507
KMEANS succeededK-Means result: 0
Scalar runtime: 0
cd kmeans && if [ -d script ]; then python3 script/gen_data.py  > data.S ; else touch data.S; fi
sed -i s/"li t0, MSTATUS_FS | MSTATUS_XS$"/"li t0, MSTATUS_FS | MSTATUS_XS | MSTATUS_VS"/ /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S
git update-index --assume-unchanged /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S
/scratch/sem23h22/ara/install/riscv-llvm/bin/clang -march=rv64gcv_zfh_zvfh0p1 -menable-experimental-extensions -mabi=lp64d -mno-relax -fuse-ld=lld -fno-vectorize -mllvm -scalable-vectorization=off -mllvm -riscv-v-vector-bits-min=0 -Xclang -target-feature -Xclang +no-optimized-zero-stride-load -mcmodel=medany -I/scratch/sem23h22/ara/apps/common -std=gnu99 -O3 -ffast-math -fno-common -fno-builtin-printf  -DNR_LANES=4 -DVLEN=4096 -Wunused-variable -Wall -Wextra -Wno-unused-command-line-argument  -DPREALLOCATE=1 -DSPIKE=1 -I/scratch/sem23h22/ara/apps/riscv-tests/env -I/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common -ffunction-sections -fdata-sections -c kmeans/data.S -o kmeans/data.S.o.spike
/scratch/sem23h22/ara/install/riscv-llvm/bin/clang -march=rv64gcv_zfh_zvfh0p1 -menable-experimental-extensions -mabi=lp64d -mno-relax -fuse-ld=lld -fno-vectorize -mllvm -scalable-vectorization=off -mllvm -riscv-v-vector-bits-min=0 -Xclang -target-feature -Xclang +no-optimized-zero-stride-load -mcmodel=medany -I/scratch/sem23h22/ara/apps/common -std=gnu99 -O3 -ffast-math -fno-common -fno-builtin-printf  -DNR_LANES=4 -DVLEN=4096 -Wunused-variable -Wall -Wextra -Wno-unused-command-line-argument  -DPREALLOCATE=1 -DSPIKE=1 -I/scratch/sem23h22/ara/apps/riscv-tests/env -I/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common -ffunction-sections -fdata-sections -c /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S -o /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S.o.spike
mkdir -p bin/
/scratch/sem23h22/ara/install/riscv-llvm/bin/clang -Iinclude -march=rv64gcv_zfh_zvfh0p1 -menable-experimental-extensions -mabi=lp64d -mno-relax -fuse-ld=lld -fno-vectorize -mllvm -scalable-vectorization=off -mllvm -riscv-v-vector-bits-min=0 -Xclang -target-feature -Xclang +no-optimized-zero-stride-load -mcmodel=medany -I/scratch/sem23h22/ara/apps/common -std=gnu99 -O3 -ffast-math -fno-common -fno-builtin-printf  -DNR_LANES=4 -DVLEN=4096 -Wunused-variable -Wall -Wextra -Wno-unused-command-line-argument  -DPREALLOCATE=1 -DSPIKE=1 -I/scratch/sem23h22/ara/apps/riscv-tests/env -I/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common -ffunction-sections -fdata-sections -o bin/kmeans.spike kmeans/data.S.o.spike kmeans/kernel/kmeans.c.o.spike kmeans/main.c.o.spike /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/crt.S.o.spike /scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/syscalls.c.o.spike common/util.c.o.spike -static -nostartfiles -lm -Wl,--gc-sections -nostdlib -T/scratch/sem23h22/ara/apps/riscv-tests/benchmarks/common/test.ld -Wl,--gc-sections -DSPIKE
/scratch/sem23h22/ara/install/riscv-llvm/bin/llvm-objdump --mattr=v -D bin/kmeans.spike > bin/kmeans.spike.dump
mkdir -p spike_runs

Simulating kmeans with SPIKE:

/scratch/sem23h22/ara/install/riscv-isa-sim/bin/spike --isa=rv64gcv_zfh --varch="vlen:4096,elen:64" bin/kmeans.spike | tee spike_runs/spike-run-kmeans

=============
=  KMEANS  =
=============


Matrix k:
17 20 35 
1 32 27 
30 36 15 
Matrix A:
38 28 14 42 7 20 38 18 22 10 10 23 35 39 23 2 21 1 23 43 29 37 1 20 32 11 21 43 24 48 26 41 27 15 14 46 43 2 36 6 20 8 38 17 3 24 13 49 8 25 1 19 27 46 6 43 7 46 34 13 16 35 49 39 3 1 5 41 3 28 17 25 43 33 9 35 13 30 47 14 7 13 22 39 20 15 44 17 46 23 25 24 44 40 28 14 44 0 24 6 
42 7 20 38 18 22 10 10 23 35 39 23 2 21 1 23 43 29 37 1 20 32 11 21 43 24 48 26 41 27 15 14 46 43 2 36 6 20 8 38 17 3 24 13 49 8 25 1 19 27 46 6 43 7 46 34 13 16 35 49 39 3 1 5 41 3 28 17 25 43 33 9 35 13 30 47 14 7 13 22 39 20 15 44 17 46 23 25 24 44 40 28 14 44 0 24 6 8 23 0 
38 18 22 10 10 23 35 39 23 2 21 1 23 43 29 37 1 20 32 11 21 43 24 48 26 41 27 15 14 46 43 2 36 6 20 8 38 17 3 24 13 49 8 25 1 19 27 46 6 43 7 46 34 13 16 35 49 39 3 1 5 41 3 28 17 25 43 33 9 35 13 30 47 14 7 13 22 39 20 15 44 17 46 23 25 24 44 40 28 14 44 0 24 6 8 23 0 43 7 23 
Calculating kmeans...
MAIN
iteration number: 0 
custom memcpy
Assign Points to Clusters
Matrix clusters:
2 	2 	0 	2 	0 	1 	2 	0 	0 	1 	1 	1 	0 	2 	1 	1 	1 	0 	0 	2 	0 	2 	1 	1 	2 	1 	1 	2 	1 	2 	2 	2 	1 	0 	1 	2 	2 	0 	0 	0 	0 	1 	2 	1 	1 	0 	0 	2 	1 	1 	0 	1 	1 	2 	1 	2 	1 	2 	2 	1 	1 	2 	2 	2 	1 	0 	1 	2 	1 	2 	0 	1 	2 	0 	1 	2 	1 	1 	2 	1 	0 	1 	1 	2 	1 	0 	2 	0 	2 	0 	1 	0 	2 	2 	0 	1 	2 	1 	1 	1 	
Cluster Centers:
Cluster 0: (17, 6)
Cluster 1: (14, 33)
Cluster 2: (40, 26)
Cluster 0 Variance: 3345
Cluster 1 Variance: 4864
Cluster 2 Variance: 6821
Total Variation: 15030
iteration number: 1 
custom memcpy
Assign Points to Clusters
Matrix clusters:
2 	2 	0 	2 	0 	1 	2 	0 	0 	1 	1 	1 	0 	2 	1 	1 	1 	0 	0 	2 	0 	2 	1 	1 	2 	1 	1 	2 	1 	2 	2 	2 	1 	0 	1 	2 	2 	0 	0 	0 	0 	1 	2 	1 	1 	0 	0 	2 	1 	1 	0 	1 	1 	2 	1 	2 	1 	2 	2 	1 	1 	2 	2 	2 	1 	0 	1 	2 	1 	2 	0 	1 	2 	0 	1 	2 	1 	1 	2 	1 	0 	1 	1 	2 	1 	0 	2 	0 	2 	0 	1 	0 	2 	2 	0 	1 	2 	1 	1 	1 	
Cluster Centers:
Cluster 0: (17, 6)
Cluster 1: (14, 33)
Cluster 2: (40, 26)
Cluster 0 Variance: 3345
Cluster 1 Variance: 4864
Cluster 2 Variance: 6821
Total Variation: 15030
KMEANS succeededK-Means result: 0
Scalar runtime: 0
